{"ast":null,"code":"import Web3Istance from \"../Web3\";\nimport UserABI from '../../ABIs/User.json';\nexport default class User extends Web3Istance {\n  constructor() {\n    super();\n    let ABIScheduling = UserABI.abi;\n    let ContractNetworks = UserABI.networks;\n    let contractAddress = ContractNetworks[Object.keys(ContractNetworks)[Object.keys(ContractNetworks).length - 1]].address;\n    this.contract = new this.web3.eth.Contract(ABIScheduling, contractAddress); //console.log(`Indirizzo Contratto ----- `+ contractAddress);  \n  }\n\n  async addCaller(position, username, begin, end) {\n    if (begin !== undefined && end !== undefined) {\n      console.log(\"Maker\");\n      let account = await this.checkIfWalletIsConnected();\n      let res = await this.contract.methods.addMaker(this.utils.fromAscii(JSON.stringify(position)), this.utils.fromAscii(username), parseInt(begin), parseInt(end)).send({\n        from: account,\n        gas: 4600000\n      }).then(res => {\n        if (res) return true;else return false;\n      });\n      return res;\n    } else {\n      console.log(\"User\");\n      let account = await this.checkIfWalletIsConnected();\n      let res = await this.contract.methods.addCaller(this.utils.fromAscii(JSON.stringify(position)), this.utils.fromAscii(username)).send({\n        from: account,\n        gas: 4600000\n      }).then(res => {\n        if (res) return true;else return false;\n      });\n      return res;\n    }\n  }\n\n  async isUser() {\n    let account = await this.checkIfWalletIsConnected();\n    console.log(account);\n    let res = await this.contract.methods.isPlayer(account).call();\n    console.log(res);\n    return res;\n  }\n\n  async getUser() {\n    // await this.checkIfWalletIsConnected();\n    let res = await this.contract.methods.getPlayerInfo().call();\n    console.log(res);\n    return res;\n  }\n\n}","map":{"version":3,"names":["Web3Istance","UserABI","User","constructor","ABIScheduling","abi","ContractNetworks","networks","contractAddress","Object","keys","length","address","contract","web3","eth","Contract","addCaller","position","username","begin","end","undefined","console","log","account","checkIfWalletIsConnected","res","methods","addMaker","utils","fromAscii","JSON","stringify","parseInt","send","from","gas","then","isUser","isPlayer","call","getUser","getPlayerInfo"],"sources":["/home/crow/Scrivania/AF2/newFrontEnd/src/SmartContracts/Users/Users.js"],"sourcesContent":["import Web3Istance from \"../Web3\";\nimport UserABI from '../../ABIs/User.json'\n\nexport default class User extends Web3Istance{\n    constructor(){\n        super();\n        let ABIScheduling = UserABI.abi;\n        let ContractNetworks = UserABI.networks;\n        let contractAddress=ContractNetworks[Object.keys(ContractNetworks)[Object.keys(ContractNetworks).length - 1]].address;\n        this.contract=new this.web3.eth.Contract(ABIScheduling,contractAddress);\n        //console.log(`Indirizzo Contratto ----- `+ contractAddress);  \n        }\n    \n\n        async addCaller(position,username,begin,end){\n            if(begin!==undefined && end!==undefined){\n                console.log(\"Maker\");\n                let account=await this.checkIfWalletIsConnected();\n                let res=await this.contract.methods.addMaker(this.utils.fromAscii(JSON.stringify(position)),this.utils.fromAscii(username),parseInt(begin),parseInt(end))\n                    .send({from:account,gas:4600000}).then((res)=>{\n                        if(res)\n                            return true;\n                        else return false;\n                    });\n                return res;\n            }\n            else{\n                console.log(\"User\");\n                let account=await this.checkIfWalletIsConnected();\n                let res=await this.contract.methods.addCaller(this.utils.fromAscii(JSON.stringify(position)),this.utils.fromAscii(username))\n                    .send({from:account,gas:4600000}).then((res)=>{\n                        if(res)\n                            return true;\n                        else return false;\n                    });\n                return res;\n            }\n        }\n\n        async isUser(){\n            let account = await this.checkIfWalletIsConnected();\n            console.log(account);\n            let res=await this.contract.methods.isPlayer(account).call()\n            console.log(res)\n            return res;\n\n        }\n\n        async getUser(){\n           // await this.checkIfWalletIsConnected();\n            let res= await this.contract.methods.getPlayerInfo().call();\n            console.log(res);\n            return res;\n        }\n\n\n}"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,SAAxB;AACA,OAAOC,OAAP,MAAoB,sBAApB;AAEA,eAAe,MAAMC,IAAN,SAAmBF,WAAnB,CAA8B;EACzCG,WAAW,GAAE;IACT;IACA,IAAIC,aAAa,GAAGH,OAAO,CAACI,GAA5B;IACA,IAAIC,gBAAgB,GAAGL,OAAO,CAACM,QAA/B;IACA,IAAIC,eAAe,GAACF,gBAAgB,CAACG,MAAM,CAACC,IAAP,CAAYJ,gBAAZ,EAA8BG,MAAM,CAACC,IAAP,CAAYJ,gBAAZ,EAA8BK,MAA9B,GAAuC,CAArE,CAAD,CAAhB,CAA0FC,OAA9G;IACA,KAAKC,QAAL,GAAc,IAAI,KAAKC,IAAL,CAAUC,GAAV,CAAcC,QAAlB,CAA2BZ,aAA3B,EAAyCI,eAAzC,CAAd,CALS,CAMT;EACC;;EAGc,MAATS,SAAS,CAACC,QAAD,EAAUC,QAAV,EAAmBC,KAAnB,EAAyBC,GAAzB,EAA6B;IACxC,IAAGD,KAAK,KAAGE,SAAR,IAAqBD,GAAG,KAAGC,SAA9B,EAAwC;MACpCC,OAAO,CAACC,GAAR,CAAY,OAAZ;MACA,IAAIC,OAAO,GAAC,MAAM,KAAKC,wBAAL,EAAlB;MACA,IAAIC,GAAG,GAAC,MAAM,KAAKd,QAAL,CAAce,OAAd,CAAsBC,QAAtB,CAA+B,KAAKC,KAAL,CAAWC,SAAX,CAAqBC,IAAI,CAACC,SAAL,CAAef,QAAf,CAArB,CAA/B,EAA8E,KAAKY,KAAL,CAAWC,SAAX,CAAqBZ,QAArB,CAA9E,EAA6Ge,QAAQ,CAACd,KAAD,CAArH,EAA6Hc,QAAQ,CAACb,GAAD,CAArI,EACTc,IADS,CACJ;QAACC,IAAI,EAACX,OAAN;QAAcY,GAAG,EAAC;MAAlB,CADI,EACwBC,IADxB,CAC8BX,GAAD,IAAO;QAC1C,IAAGA,GAAH,EACI,OAAO,IAAP,CADJ,KAEK,OAAO,KAAP;MACR,CALS,CAAd;MAMA,OAAOA,GAAP;IACH,CAVD,MAWI;MACAJ,OAAO,CAACC,GAAR,CAAY,MAAZ;MACA,IAAIC,OAAO,GAAC,MAAM,KAAKC,wBAAL,EAAlB;MACA,IAAIC,GAAG,GAAC,MAAM,KAAKd,QAAL,CAAce,OAAd,CAAsBX,SAAtB,CAAgC,KAAKa,KAAL,CAAWC,SAAX,CAAqBC,IAAI,CAACC,SAAL,CAAef,QAAf,CAArB,CAAhC,EAA+E,KAAKY,KAAL,CAAWC,SAAX,CAAqBZ,QAArB,CAA/E,EACTgB,IADS,CACJ;QAACC,IAAI,EAACX,OAAN;QAAcY,GAAG,EAAC;MAAlB,CADI,EACwBC,IADxB,CAC8BX,GAAD,IAAO;QAC1C,IAAGA,GAAH,EACI,OAAO,IAAP,CADJ,KAEK,OAAO,KAAP;MACR,CALS,CAAd;MAMA,OAAOA,GAAP;IACH;EACJ;;EAEW,MAANY,MAAM,GAAE;IACV,IAAId,OAAO,GAAG,MAAM,KAAKC,wBAAL,EAApB;IACAH,OAAO,CAACC,GAAR,CAAYC,OAAZ;IACA,IAAIE,GAAG,GAAC,MAAM,KAAKd,QAAL,CAAce,OAAd,CAAsBY,QAAtB,CAA+Bf,OAA/B,EAAwCgB,IAAxC,EAAd;IACAlB,OAAO,CAACC,GAAR,CAAYG,GAAZ;IACA,OAAOA,GAAP;EAEH;;EAEY,MAAPe,OAAO,GAAE;IACZ;IACC,IAAIf,GAAG,GAAE,MAAM,KAAKd,QAAL,CAAce,OAAd,CAAsBe,aAAtB,GAAsCF,IAAtC,EAAf;IACAlB,OAAO,CAACC,GAAR,CAAYG,GAAZ;IACA,OAAOA,GAAP;EACH;;AAlDoC"},"metadata":{},"sourceType":"module"}